<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<chapter id="project">
  <title>MacPorts Project</title>

  <para>The MacPorts Project uses a system called <ulink
  url="http://trac.edgewall.org/">Trac</ulink> to file tickets to report bugs
  and enhancement requests. Trac also provides an interface to browse the
  <ulink url="http://trac.macports.org/projects/macports/browser/">MacPorts
  Subversion repository</ulink>. Though anyone may search Trac for tickets,
  you must <ulink
  url="http://www.macosforge.org/wp-register.php">register</ulink> for a Trac
  account to create tickets.</para>

  <section id="project.tickets">
    <title>Creating Trac Tickets</title>

    <para>Once you are logged into Trac, you may click <emphasis>View Tickets
    -&gt; New Ticket</emphasis> and you will be presented with a new ticket
    window shown in the graphic below. Follow the Trac ticket guidelines below
    to fill out the form.</para>

    <screenshot>
      <screeninfo>A new Trac ticket</screeninfo>

      <mediaobject>
        <imageobject>
          <imagedata fileref="trac-default.png" />
        </imageobject>
      </mediaobject>
    </screenshot>

    <section id="project.tickets.guidelines">
      <title>Trac Ticket Guidelines</title>

      <para>There are certain conventions used to ensure that Trac tickets
      convey as much accurate information as possible so problems and
      contributions may be acted upon efficiently.</para>

      <itemizedlist>
        <listitem>
          <para><guilabel>Short Summary:</guilabel>
          <replaceable>[port]</replaceable>
          <replaceable>[version]</replaceable> <replaceable>[concise
          description]</replaceable></para>

          <itemizedlist>
            <listitem>
              <para>Example: "rrdtool-1.2.23 Configure error - build
              failure"</para>
            </listitem>
          </itemizedlist>
        </listitem>

        <listitem>
          <para><guilabel>Type:</guilabel> There are two main types of
          tickets.</para>

          <itemizedlist>
            <listitem>
              <para><guimenu>defect</guimenu> - The default; any port/MacPorts
              build/runtime failures and/or documentation corrections.</para>
            </listitem>

            <listitem>
              <para><guimenu>enhancement</guimenu> - Tickets, with or without
              patches, created to enhance something that isn't failing its
              intended purpose.</para>
            </listitem>
          </itemizedlist>
        </listitem>

        <listitem>
          <para><guilabel>Full Description:</guilabel> All details that might
          be relevant to someone reading the ticket. <ulink
          url="http://trac.macports.org/projects/macports/wiki/WikiFormatting">Wiki
          formatting</ulink> or attached log files should be used for large
          text blocks. If you want to post a build log make sure you use
          <literal>{{{<replaceable>...</replaceable>}}}</literal> around the
          log or it could break the page layout (i.e.
          <literal>{{{<replaceable>your build log
          here</replaceable>}}}</literal>).</para>
        </listitem>

        <listitem>
          <para><guilabel>Priority:</guilabel> Assign a priority level to the
          ticket.</para>

          <itemizedlist>
            <listitem>
	      <para><guimenu>High</guimenu> - Reserved for the use of MacPorts
              team members, as they are the best fit to determine which reports
              warrant a higher priority over others.</para>
            </listitem>

            <listitem>
              <para><guimenu>Normal</guimenu> - The default. For normal port
              failures, non-critical enhancement requests, non-critical port
              failures.</para>
            </listitem>

            <listitem>
              <para><guimenu>Low</guimenu> - For mostly cosmetic improvements,
              documentation corrections/improvements, etc.</para>
            </listitem>

            <listitem>
              <para>Blank - Anything that doesn't fit the categories high,
              normal, or low.</para>
            </listitem>
          </itemizedlist>
        </listitem>

        <listitem>
          <para><guilabel>Component:</guilabel> Set what part of the MacPorts
          Project the ticket is to be filed against.</para>

          <itemizedlist>
            <listitem>
              <para><guimenu>base</guimenu> - Tickets related to MacPorts base
              code.</para>
            </listitem>

            <listitem>
              <para><guimenu>guide</guimenu> - Documentation enhancements and
              error corrections, or patches to the MacPorts Guide.</para>
            </listitem>

            <listitem>
              <para><guimenu>server/hosting</guimenu> - For MacPorts hosting &amp;
              server-side issues, reserved for MacPorts PortMgr team members.</para>
            </listitem>

            <listitem>
              <para><guimenu>ports</guimenu> - Tickets related to
              ports.</para>
            </listitem>

            <listitem>
              <para><guimenu>www</guimenu> - MacPorts website enhancements and
              error corrections.</para>
            </listitem>
          </itemizedlist>
        </listitem>

        <listitem>
          <para><guilabel>Keywords:</guilabel> Type any keywords that might
          help when searching for tickets (portname, type of problem,
          etc).</para>
        </listitem>

        <listitem>
          <para><guilabel>Cc:</guilabel> Anyone else besides the ticket reporter
          and assignee who would like to be kept involved in the development
          of the ticket, and/or the port maintainer in case his/her address does
	  not appear in the <guimenu>Assign To</guimenu> drop down menu. Multiple
	  emails should be separated with a comma (i.e. <literal>you@example.org,
	  maintainer@macports.org</literal>). To get the maintainer email address
	  use <command>port info &lt;portname&gt;</command>.</para>
        </listitem>

        <listitem>
          <para><guilabel>Milestone:</guilabel> This is a ticket category that
          allows for search and sorting tickets efficiently.</para>

          <itemizedlist>
            <listitem>
              <para><guimenu>MacPorts base enhancements</guimenu> - for
              tickets requesting or providing improvements to the
              functionality of the MacPorts system.</para>
            </listitem>

            <listitem>
              <para><guimenu>MacPorts base bugs</guimenu> - for tickets
              reporting or fixing bugs in the MacPorts system.</para>
            </listitem>

            <listitem>
              <para><guimenu>Port Bugs</guimenu> - for tickets reporting or
              fixing bugs in ports provided by MacPorts.</para>
            </listitem>

            <listitem>
              <para><guimenu>Port Enhancements</guimenu> - for submissions
              providing enhancements to ports provided by MacPorts.</para>
            </listitem>

            <listitem>
              <para><guimenu>Port Requests</guimenu> - for requests for ports
              to be added to MacPorts.</para>
            </listitem>

            <listitem>
              <para><guimenu>Port Submissions</guimenu> - for submissions that
              add a port to MacPorts.</para>
            </listitem>

            <listitem>
              <para><guimenu>Port Updates</guimenu> - for submissions that
              update a port provided by MacPorts.</para>
            </listitem>

            <listitem>
              <para><guimenu>Website &amp; Documentation</guimenu> - for
              tickets relating to the documentation for MacPorts, including
              the MacPorts guide, wiki, man pages and the website.</para>
            </listitem>
          </itemizedlist>
        </listitem>

        <listitem>
          <para><guilabel>Version:</guilabel> Select the MacPorts version you
          are using when it is applicable.</para>
        </listitem>

        <listitem>
          <para><guilabel>Assign To:</guilabel> For tickets on ports, select
          the port maintainer's email address (use <command>port info
          &lt;portname&gt;</command>). If the maintainer's email address is
          <email>nomaintainer@macports.org</email>, select
          <email>macports-tickets@lists.macosforge.org</email>.</para>
        </listitem>

        <listitem>
          <para><guilabel>Attachments:</guilabel> Files may be attached only
          after a ticket has been submitted. Once the ticket has been created
          you will see the file attachment button.</para>
        </listitem>
      </itemizedlist>
    </section>
  </section>

  <section id="project.contributing">
    <title>Contributing to MacPorts</title>

    <para>You may contribute new ports and port updates to current ports using
    Trac tickets.</para>

    <!-- Should we have similar sections about committing to base sources and
    documentation, or alternatively add this to the following? -->

    <section id="project.contributing.new">
      <title>New Ports</title>

      <para>Ports are contributed by following these steps. See Ticket
      Submission Guidelines above for a description of all fields.</para>

      <orderedlist>
        <listitem>
          <para>Create a Trac ticket.</para>
        </listitem>

        <listitem>
          <para>Set the type to <guilabel>enhancement</guilabel>.</para>
        </listitem>

        <listitem>
          <para>Set the milestone to <guilabel>Port
          Submissions</guilabel>.</para>
        </listitem>

        <listitem>
          <para>Attach the <filename>Portfile</filename> and any required
          patchfiles to the ticket.</para>
        </listitem>
      </orderedlist>
    </section>

    <section id="project.contributing.updates">
      <title>Port Updates</title>

      <para>Portfile updates should always be contributed as
      <filename>Portfile</filename> patches. Ports are contributed by
      following these steps. See Ticket Submission Guidelines above for a
      description of all fields.</para>

      <orderedlist>
        <listitem>
          <para>Create a <filename>Portfile</filename> patch with your changes
          as described in Portfile Development.</para>
        </listitem>

        <listitem>
          <para>Create a Trac ticket.</para>
        </listitem>

        <listitem>
          <para>Set the type to <guilabel>enhancement</guilabel>.</para>
        </listitem>

        <listitem>
          <para>Set the milestone to <guilabel>Port
          Enhancements</guilabel>.</para>
        </listitem>

        <listitem>
          <para>Attach your Portfile patch file and any new or changed patch
          files (don't patch patches) to the ticket.</para>
        </listitem>
      </orderedlist>
    </section>
  </section>

  <section id="project.update-policies">
    <title>Port Update Policies</title>

    <para>Port maintainers normally are given commit privileges to the
    Subversion repository so they can make updates to their own ports.
    However, The MacPorts Project does not restrict commit privileges for
    maintainers, so before a person other than a port's maintainer updates a
    port it is a good practice to inform a port's maintainer. See details
    below.</para>

    <section id="project.update-policies.nonmaintainer">
      <title>Non-Maintainer Port Updates</title>

      <para>If you have a port update or bugfix for a port you do not
      maintain, to respect the rights of the port maintainer you should follow
      the following guidelines:</para>

      <orderedlist>
        <listitem>
          <para>If a port's maintainer is
          <email>nomaintainer@macports.org</email>, you may feel free to make
          updates and/or take maintainership of the port.</para>
        </listitem>

        <listitem>
          <para>If a port's maintainer contains the address
          <email>openmaintainer@macports.org</email>, this means that the
          author allows minor updates to the port without contacting him
          first. But permission should still be sought for major
          changes.</para>
        </listitem>

        <listitem>
          <para>Create patch file(s) as necessary, attach them to a Trac
          ticket, and assign the ticket to the maintainer and Cc him or
          her.</para>
        </listitem>

        <listitem>
          <para>Wait for a response from the maintainer. The maintainer should
          apply the patches and close the ticket within 72 hours.</para>
        </listitem>
      </orderedlist>

      <para>However, for maintained ports without
      <email>openmaintainer@macports.org</email>, there are some conditions
      under which maintainer permission may be waived:</para>

      <itemizedlist>
        <listitem>
          <para>If the maintainer does not respond within 72 hours, you or
          another committer may review the patches and update the port. If you
          are not a committer, you may email
          <email>macports-dev@lists.macosforge.org</email> and request the
          updates be committed.</para>
        </listitem>

        <listitem>
          <para>A port is abandoned by it's current maintainer. A port against
          which a Port Abandoned ticket has been filed (see below) can be
          updated without contacting the maintainer.</para>
        </listitem>

        <listitem>
          <para>A critical port is broken that affects many users.</para>
        </listitem>
      </itemizedlist>
    </section>

    <section id="project.update-policies.abandonment">
      <title>Port Abandonment</title>

      <para>A port may be considered abandoned if a bug has not been
      acknowledged for more than three weeks after a ticket is filed. If this
      time period has passed and you wish to initiate the Port Abandonment
      protocol and volunteer as the new maintainer:</para>

      <orderedlist>
        <listitem>
          <para>File a new Trac ticket with the summary line [Port
          Abandoned].</para>
        </listitem>

        <listitem>
          <para>Refer to the original unacknowledged ticket in the Port
          Abandoned ticket.</para>
        </listitem>

        <listitem>
          <para>The Port Abandoned ticket may be closed when the new
          maintainer is assigned, and the original ticket with the updates may
          be resolved when the updates attached to the original ticket are
          committed.</para>
        </listitem>
      </orderedlist>
    </section>
  </section>

  <section id="project.membership">
    <title>MacPorts Membership</title>

    <para>A requirement for a person to become a MacPorts committer is to
    first become involved and contribute to the project. This may be done by
    having a record of contributing to the project in several of the following
    ways:</para>

    <itemizedlist>
      <listitem>
        <para>Contributing new ports.</para>
      </listitem>

      <listitem>
        <para>Fixing bugs in existing ports.</para>
      </listitem>

      <listitem>
        <para>Volunteering as a maintainer of non-maintained ports.</para>
      </listitem>

      <listitem>
        <para>Involvement on MacPorts support lists.</para>
      </listitem>
    </itemizedlist>

    <para>To apply for MacPorts commit rights, send a brief email to the
    PortMgr team at <email>macports-mgr@lists.macosforge.org</email> entitled
    “Request for commit rights” detailing the reasons for your application and
    why you think you deserve commit rights (including evidence of
    contributions to MacPorts as described above).</para>
  </section>

  <section id="project.portmgr">
    <title>The PortMgr Team</title>

    <para>The MacPorts PortMgr team is the steering group for The MacPorts
    Project. Its membership was determined by public elections among project
    members in March of 2005, resulting in the appointing of <personname>

        <firstname>James</firstname>

        <othername role="initial">D.</othername>

        <surname>Berry</surname>
      </personname>, <personname>
      <firstname>Juan</firstname>

        <othername role="middlename">Manuel</othername>

        <surname>Palacios</surname>
      </personname> and <personname>

        <firstname>Markus</firstname>

        <othername role="initial">W.</othername>

        <surname>Weissman</surname>
      </personname>.

    They are responsible for matters such as:

    <itemizedlist>
        <listitem>
          <para>approving new project members (i.e. granting commit
          rights);</para>
        </listitem>

        <listitem>
          <para>setting general guidelines for the project;</para>
        </listitem>

        <listitem>
          <para>dispute resolution;</para>
        </listitem>

        <listitem>
          <para>managing the projects infrastructure; and</para>
        </listitem>

        <listitem>
          <para>engineering releases.</para>
        </listitem>
      </itemizedlist></para>

    
  </section>
</chapter>
